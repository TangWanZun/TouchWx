<view class="app-body">
  <!-- 聊天内容 -->
  <!-- 这个是当使用功能区的时候为了兼容苹果flex -->
  <!-- {{voiceBtn.functionUnfoldShow?"calc( 60vh - 105px )":"calc( 100vh - 105px )"}} -->
  <scroll-view  scroll-y="true" scroll-into-view="chat-{{intoView}}" class='page-con' style='height:calc( 100vh - 55px )'>
    <view id='chat-{{index+1}}' class='page-chat-box {{item.isLeft?"":"page-chat-box-right"}}' wx:for='{{dataList}}' wx:key="{{item.MsgId}}">
      <view class='page-chat-img'><image src="{{item.headImg}}"></image></view>
      <!-- 内容 -->
      <view class='page-chat-body'>
        <view class='page-chat-name'>{{item.name}}</view>
        <!-- 文本内容 -->
        <view wx:if="{{item.msgType===CHAT_CONST.CHAT_TEXT}}" class='page-chat-con'>{{item.msgData}}</view>
        <!-- 图片内容 -->
        <view wx:elif="{{item.msgType===CHAT_CONST.CHAT_IAMGE}}" class='page-chat-con-img' data-src="{{item.msgData.mediaOriginal}}" bindtap='showBigImage'><image mode="widthFix" src='{{item.msgData.thumbnail}}'></image></view>
        <!-- 地理位置 -->
        <view bindtap='openLocationFun' wx:elif="{{item.msgType===CHAT_CONST.CHAT_ADDS}}" data-name='{{item.msgData.addressDetails}}' data-address='{{item.msgData.addressName}}' data-latitude='{{item.msgData.latitude}}' data-longitude='{{item.msgData.longitude}}' class='page-chat-con-map'>
          <view  class='page-chat-con-map-head'>位置(点击查看)</view>
          <view class='page-chat-con-map-body'>{{item.msgData.addressDetails}}</view>
        </view>
        <!-- 语音 -->
        <view wx:elif="{{item.msgType===CHAT_CONST.CHAT_VOICE}}" data-msgid="{{index}}" data-src="{{item.msgData.src}}" class='page-chat-con page-chat-con-audio' bindtap='playAudio'>
          <view class='page-chat-con-audio-image {{audio.playMsgId===index?"page-chat-con-audio-play":""}} '><image src='/assets/chat/audio{{item.isLeft?"":"-b"}}.svg'></image></view>
          <view class='page-chat-con-audio-time'>{{item.msgData.time}}"</view>
        </view>
      </view>
      <!-- 加载 -->
      <view class='page-chat-loding' >
        <!-- 加载中 -->
        <image wx:if="{{item.state==CHAT_CONST.LOG_IN}}" class='page-chat-loding-rotate' src='/assets/chat/jz.svg'></image>
        <!-- 加载失败 -->
        <image wx:if="{{item.state==CHAT_CONST.LOG_FAIL}}" src='/assets/chat/sb.svg'></image>
      </view>
    </view>
  </scroll-view>
  <!-- 底部栏 -->
  <view class='page-foot'>
    <!-- 聊天框区域 -->
    <view class='page-input-box'>
      <view class='page-input app-center'>
        <input bindconfirm="sendText" value="{{inputCon.value}}" confirm-type="send" confirm-hold="true" cursor-spacing="20" bindinput="bindInput"></input>
      </view>
      <view class='page-send app-center {{inputCon.isValue?"app-main-bg":""}}' bindtap='sendText'>发送</view>
    </view>
    <!-- 功能区 -->
    <!-- <view class='page-funtion'> -->
      <!-- 语音 -->
      <!-- <view class='page-funtion-item page-funtion-item-audio' bindtouchstart='voiceInShow'>
        <image src='/assets/chat/yy{{voiceBtn.functionUnfoldShow?"_show":""}}.svg'></image>
      </view> -->
      <!-- 图库 -->
      <!-- <view class='page-funtion-item' bindtap='chooseImageFun'>
        <image src='/assets/chat/tp.svg'></image>
      </view> -->
      <!-- 拍照 -->
      <!-- <view class='page-funtion-item' bindtap='chooseCameraFun'>
        <image src='/assets/chat/zx.svg'></image>
      </view> -->
      <!-- <view class='page-funtion-item' bindtap='chooseLocationFun'>
        <image src='/assets/chat/wz.svg'></image>
      </view>
    </view> -->
    <!-- 功能展开区列如语音 -->
    <!-- <view class='page-function-unfold {{voiceBtn.functionUnfoldShow?"page-function-unfold-show":""}} app-center'>
      <view class='page-voice-hint'>
        {{voiceBtn.hint}}
      </view>
      <view class='page-voice-buttom {{voiceBtn.btnStart?"page-voice-buttom-action":""}} app-main-bg app-center'
       bindtouchstart="voiceTouchstart"
       bindtouchmove="voiceTouchmove"
       bindtouchcancel=""
       bindtouchend="voiceTouchend"
       >
        <image src='/assets/chat/ht.svg'></image>
      </view>
      <view class='page-voice-cancel {{voiceBtn.btnStart?"page-voice-cancel-show":""}} {{voiceBtn.isDelete?"page-voice-cancel-highlight":""}} app-center'>
        <image class='page-voice-cancel-image' src='/assets/chat/sc.svg'></image>
      </view>
    </view> -->
  </view>
</view>