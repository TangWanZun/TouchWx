<view class="app-body">
  <!-- 聊天内容 -->
  <!-- 这个是当使用功能区的时候为了兼容苹果flex -->
  <!-- {{voiceBtn.functionUnfoldShow?"calc( 60vh - 105px )":"calc( 100vh - 105px )"}} -->
  <scroll-view  scroll-y="true" scroll-into-view="chat-{{intoView}}" class='page-con' style='height:calc( 100vh - 55px )'>
    <view id='chat-{{index+1}}' class='page-chat-box {{item.FromType===CHAT_TYPE.CHAT_RIGHT?"page-chat-box-right":""}}' wx:for='{{dataList}}' wx:key="{{item.MsgId}}">
      <view class='page-chat-img'><image src="{{item.ProfilePhoto?(imgUrl+item.ProfilePhoto):item.FromType===CHAT_TYPE.CHAT_RIGHT?'/assets/chat/kf_tx.svg':'/assets/chat/kh_tx.svg'}}"></image></view>
      <view class='page-chat-body'>
        <view class='page-chat-name'>{{item.FromType===CHAT_TYPE.CHAT_RIGHT?item.UserName:item.CardName}}</view>
        <!-- 文本内容 -->
        <view wx:if="{{item.MsgType===CHAT_TYPE.CHAT_TEXT}}" class='page-chat-con'>{{item.MsgData}}</view>
        <!-- 图片内容 -->
        <view wx:elif="{{item.MsgType===CHAT_TYPE.CHAT_IAMGE}}" class='page-chat-con-img' data-src="{{imgUrl+item.MediaOriginal}}" bindtap='showBigImage'><image mode="widthFix" src='{{imgUrl+item.Thumbnail}}'></image></view>
        <!-- 地理位置 -->
        <view bindtap='openLocationFun' wx:elif="{{item.MsgType===CHAT_TYPE.CHAT_ADDS}}" data-name='{{item.AddressName}}' data-address='{{item.AddressDetails}}' data-latitude='{{item.Latitude}}' data-longitude='{{item.Longitude}}' class='page-chat-con-map'>
          <view  class='page-chat-con-map-head'>位置(点击查看)</view>
          <view class='page-chat-con-map-body'>{{item.AddressDetails}}</view>
        </view>
        <!-- 语音 -->
        <view wx:elif="{{item.MsgType===CHAT_TYPE.CHAT_VOICE}}" data-msgid="{{index}}" data-src="{{item.Thumbnail}}" class='page-chat-con page-chat-con-audio' bindtap='playAudio'>
          <view class='page-chat-con-audio-image {{audio.playMsgId===index?"page-chat-con-audio-play":""}} '><image src='/assets/chat/audio{{item.FromType===CHAT_TYPE.CHAT_RIGHT?"-b":""}}.svg'></image></view>
          <view class='page-chat-con-audio-time'>{{item.Duration}}"</view>
        </view>
      </view>
    </view>
  </scroll-view>
  <!-- 底部栏 -->
  <view class='page-foot'>
    <!-- 聊天框区域 -->
    <view class='page-input-box'>
      <view class='page-input app-center'>
        <input bindconfirm="sendText" value="{{inputCon.value}}" confirm-type="send" confirm-hold="true" cursor-spacing="20" bindinput="bindInput"></input>
      </view>
      <view class='page-send app-center {{inputCon.isValue?"app-main-bg":""}}' bindtap='sendText'>发送</view>
    </view>
    <!-- 功能区 -->
    <!-- <view class='page-funtion'> -->
      <!-- 语音 -->
      <!-- <view class='page-funtion-item page-funtion-item-audio' bindtouchstart='voiceInShow'>
        <image src='/assets/chat/yy{{voiceBtn.functionUnfoldShow?"_show":""}}.svg'></image>
      </view> -->
      <!-- 图库 -->
      <!-- <view class='page-funtion-item' bindtap='chooseImageFun'>
        <image src='/assets/chat/tp.svg'></image>
      </view> -->
      <!-- 拍照 -->
      <!-- <view class='page-funtion-item' bindtap='chooseCameraFun'>
        <image src='/assets/chat/zx.svg'></image>
      </view> -->
      <!-- <view class='page-funtion-item' bindtap='chooseLocationFun'>
        <image src='/assets/chat/wz.svg'></image>
      </view>
    </view> -->
    <!-- 功能展开区列如语音 -->
    <!-- <view class='page-function-unfold {{voiceBtn.functionUnfoldShow?"page-function-unfold-show":""}} app-center'>
      <view class='page-voice-hint'>
        {{voiceBtn.hint}}
      </view>
      <view class='page-voice-buttom {{voiceBtn.btnStart?"page-voice-buttom-action":""}} app-main-bg app-center'
       bindtouchstart="voiceTouchstart"
       bindtouchmove="voiceTouchmove"
       bindtouchcancel=""
       bindtouchend="voiceTouchend"
       >
        <image src='/assets/chat/ht.svg'></image>
      </view>
      <view class='page-voice-cancel {{voiceBtn.btnStart?"page-voice-cancel-show":""}} {{voiceBtn.isDelete?"page-voice-cancel-highlight":""}} app-center'>
        <image class='page-voice-cancel-image' src='/assets/chat/sc.svg'></image>
      </view>
    </view> -->
  </view>
</view>